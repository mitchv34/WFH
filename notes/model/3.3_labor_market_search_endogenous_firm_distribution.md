### Labor Market Search {#sec-labor-market-search}

Both firms and workers discount the future at rate $\beta$. Workers are characterized by their type $h$ and direct their search toward submarkets distinguished by the promised utility level $x$. A worker of type $h$ evaluates the different utility promises available in each submarket and chooses to search in the one that maximizes their expected value. This expected value incorporates not only the probability of being hired but also the future discounted value of the job. At the same time, firms target workers of a particular type $h$ by posting job offers (or contracts) that promise a specific utility level $x$. This setup allows the market to be segmented into different submarkets. The tightness of a submarket $(h, x)$ is defined as:
$$ \theta(h, x) = \frac{v(h, x)}{u(h, x)}, $$
where $v(h, x)$ denotes the number of vacancies posted by firms in the submarket and $u(h, x)$ represents the number of unemployed workers actively searching within that particular submarket. This measure of tightness directly influences the probabilities of matching: the vacancy filling rate $q(\theta(h, x))$ and the job finding rate $p(\theta(h, x))$ are both functions of $\theta$. Matches are exogenously broken at a rate $\delta$. Free entry of firms, incurring a cost $\kappa(x)$ per vacancy posted (which may depend on the offered utility $x$), ensures that market opportunities yielding positive expected profits are exploited.

Once a firm and a worker are matched, the firm delivers the promised utility $x$ to the worker by applying the firm's optimal remote work policy $\alpha^*(\psi, h, x)$. Crucially, firms know their remote-work efficiency parameter $\psi$ *before* deciding where to post vacancies. The distribution of firm types in the overall economy is given by $F(\psi)$, which is common knowledge.

**Firm Value Functions and Probabilistic Choice:**

Firms choose strategically which submarket $(h, x)$ to target based on the potential profitability of the match. The value of an ongoing match for a firm of type $\psi$ with a worker of type $h$ under contract $x$, denoted $J(\psi, h, x)$, is determined by the current payoff plus the discounted expected continuation value:
$$ J(\psi, h, x) = Y(\alpha^*(\psi, h, x) | \psi, h) - w(x, \alpha^*(\psi, h, x)) + \beta[(1 - \delta)J(\psi, h, x) + \delta V(\psi, h)], $${#eq-valueFirmMatch}
where $V(\psi, h)$ represents the expected value for a firm of type $\psi$ upon returning to the market after separation. This value reflects the optimal posting strategy, considering the expected returns from different submarkets.

For a given worker type $h$ and observed market vacancy filling rates $\{q(h, x')\}_{x'}$, a firm $\psi$ evaluates the expected profit from posting in each submarket $x'$:
$$ \Pi_{post}(\psi, h, x') = q(h, x') J(\psi, h, x') - \kappa(x'). $$
Instead of deterministically choosing only the submarket(s) yielding the absolute maximum profit, we adopt a **probabilistic choice framework** (akin to a random utility model). Firms choose submarket $x$ with a probability $P(x | \psi, h)$ that is increasing in the potential profit $\Pi_{post}(\psi, h, x)$. A common specification (logit choice, derived from Type I Extreme Value shocks) gives:
$$ P(x | \psi, h) = \frac{\exp(\xi \cdot \Pi_{post}(\psi, h, x))}{\sum_{x''} \exp(\xi \cdot \Pi_{post}(\psi, h, x''))}, $$ {#eq-softmaxChoice}
where $\xi \ge 0$ is a parameter governing the sensitivity of choices to profit differences. As $\xi \to \infty$, the choice becomes deterministic (only the maximum profit option is chosen); as $\xi \to 0$, choices become random across profitable options. Firms only participate (i.e., $P(x | \psi, h) > 0$ for some $x$) if the maximum potential profit $\max_{x'} \Pi_{post}(\psi, h, x')$ is non-negative.

This probabilistic choice leads to **endogenous sorting** where firms with characteristics $(\psi, h)$ that yield higher profits in certain submarkets $x$ are more likely to post vacancies there.

**Equilibrium and Free Entry:**
In equilibrium, firms' expectations about vacancy filling rates $q(h,x)$ are consistent with the rates generated by the market tightness $\theta(h,x)$ resulting from firm and worker decisions. Free entry ensures that, in active markets, expected profits are driven down. Specifically, the equilibrium vacancy filling rate $q(h, x)$ adjusts such that the *expected* profit for a firm entering market $(h, x)$ is zero on average, considering the mix of firms likely to choose that market. This implies:
$$ q(h, x) \mathbb{E}\left[ J(\psi, h, x) \,|\, \text{firm } \psi \text{ chooses } (h,x) \right] = \kappa(x). $$ {#eq-tightnessDeterminationSoftmax}
The conditional expectation is calculated based on the choice probabilities and the underlying firm distribution:
$$ \mathbb{E}\left[ J(\psi, h, x) \,|\, \text{firm } \psi \text{ chooses } (h,x) \right] = \frac{\sum_{\psi'} J(\psi', h, x) P(x | \psi', h) f(\psi')}{\sum_{\psi''} P(x | \psi'', h) f(\psi'')}, $$ {#eq-conditionalJSoftmax}
where the denominator represents the total probability mass of firms choosing market $(h,x)$. A market $(h,x)$ is active only if this expected value is sufficient to cover the cost $\kappa(x)$ (i.e., $\mathbb{E}[J|h,x] > \kappa(x)$). Infra-marginal firms (those with high $J(\psi, h, x)$ relative to the average) may still perceive a positive expected profit from participating.

The distribution of firms encountered by workers searching in submarket $(h, x)$ is the *conditional distribution*, reflecting the probabilistic choices. The conditional probability density function (PDF) is:
$$ f(\psi \mid h, x) = \frac{P(x | \psi, h) f(\psi)}{\sum_{\psi'} P(x | \psi', h) f(\psi')} $$ {#eq-firmDensitySubmarketSoftmax}
where the denominator is the total mass choosing $(h,x)$. The conditional cumulative distribution function (CDF) $F(\psi \mid h, x)$ is obtained by integrating (or summing) this density:
$$ F(\psi \mid h, x) = \int_{-\infty}^{\psi} f(\psi' \mid h, x) d\psi' = \frac{\sum_{\psi'' \le \psi} P(x | \psi'', h) f(\psi'')}{\sum_{\psi'} P(x | \psi', h) f(\psi')} $$ {#eq-firmDistributionSubmarketSoftmax}

**Worker Value Functions:**
For workers, the value functions capture the trade-off between being unemployed and employed. A worker of type $h$ chooses the submarket $x$ that maximizes their expected lifetime utility. The value of unemployment $U(h)$ is:
$$ U(h) = b + \beta \max_{x} \Biggl\{ p\bigl(\theta(h,x)\bigr) \mathbb{E}_{\psi|h,x} \left[ W(\psi, h, x) \right] + \Bigl(1 - p\bigl(\theta(h,x)\bigr)\Bigr) U(h)\Biggr\}, $${#eq-unemployedWorkerValue}
where $p(\theta(h, x))$ is the job finding rate, and the expectation $\mathbb{E}_{\psi|h,x}[\cdot]$ uses the conditional distribution $F(\psi | h, x)$ from @eq-firmDistributionSubmarketSoftmax:
$$ \mathbb{E}_{\psi|h,x} \left[ W(\psi, h, x) \right] = \int W(\psi', h, x) \, dF(\psi' | h, x) = \sum_{\psi'} W(\psi', h, x) f(\psi' | h, x). $$
This reflects that workers anticipate the specific mix of firms attracted to each submarket $(h, x)$.

Once employed with a firm of type $\psi$ under contract $x$, the worker's value $W(\psi, h, x)$ evolves according to: $$ W(\psi, h, x) = x + \beta\Bigl[(1-\delta)W(\psi, h, x) + \delta\,U(h)\Bigr]. $${#eq-employedWorkerValue}


The equilibrium vacancy filling rates $q^*(h, x)$, market tightnesses $\theta^*(h, x)$, firm choice probabilities $P^*(x | \psi, h)$, and the resulting conditional distribution of firms $f^*(\psi | h, x)$ are determined simultaneously. These objects satisfy the firm's probabilistic choice rule @eq-softmaxChoice, the free entry condition @eq-tightnessDeterminationSoftmax based on the conditional expectation @eq-conditionalJSoftmax, and consistency with the underlying matching technology $q(\theta)$. We solve for this equilibrium numerically using an iterative algorithm detailed in [Appendix @sec-appendix-endogenousFirmDistribution].